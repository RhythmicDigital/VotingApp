{"ast":null,"code":"var _jsxFileName = \"/Users/Alex/voting-app/src/components/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState, useContext } from 'react';\nimport { MyContext } from '../contexts/MyContext';\nimport { JoeContext } from './CandData';\nimport { VoterContext } from './VoterData';\nimport { VoteContext } from '../contexts/Voting-Context';\nimport teamsJson from \"../lib/teams.json\";\nimport candsJson from \"../lib/cands.json\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport VotingCard from \"../components/VotingCard.jsx\";\nimport axios from 'axios'; // Importing the Login & Register Componet\n\nimport Login from './Login';\nimport Register from './Register';\nimport CandData from './CandData'; // Define the base URL\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Axios = axios.create({\n  baseURL: 'http://localhost/php-voting-api/'\n});\n\nfunction Home() {\n  _s();\n\n  const {\n    rootState,\n    logoutUser\n  } = useContext(MyContext);\n  const {\n    obama\n  } = useContext(JoeContext);\n  const {\n    joemamba,\n    castVote,\n    uncastVote\n  } = useContext(VoterContext);\n  const {\n    loading,\n    error,\n    data\n  } = obama;\n  const {\n    voterData,\n    voted\n  } = joemamba;\n  const {\n    voteState,\n    addVote,\n    readCand\n  } = useContext(VoteContext);\n  const {\n    isAuth,\n    theUser,\n    showLogin\n  } = rootState;\n  const {\n    cand_data\n  } = voteState;\n  let [teams, setTeams] = useState([]);\n  let [activeButton, setButton] = useState(\"Default\");\n  const [buttonText, setButtonText] = useState(\"Default\"); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n\n  const [buttonInactive, setButtonInactive] = useState(false); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n\n  const [candStuff, setCands] = useState([]); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n\n  const [hasVoted, setVoted] = useState(null); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n\n  const changeText = text => setButtonText(text);\n\n  const makeInactive = state => setButtonInactive(state);\n\n  useEffect(() => {\n    setTeams(teamsJson);\n    setCands(data);\n  }, []);\n\n  function incrementVoteCount(teamId) {\n    teams = teams.map(team => {\n      if (team._id === teamId) {\n        team.votes = team.votes + 1;\n      }\n\n      return team;\n    });\n    setTeams(teams);\n  }\n\n  async function read(id) {\n    try {\n      return Axios.get(\"read-candidate.php?id=\" + id).then(function (response) {\n        console.log(\"READING RAINBOW\", response.data[0]);\n        return response.data;\n      });\n    } catch (error) {\n      throw {};\n    }\n  }\n\n  function add(canId) {\n    const addVoteAndVoter = () => {\n      return axios.all([Axios.post(\"add-one-vote.php\", {\n        id: canId\n      }).then(function (response) {\n        setVoted(true);\n      }).catch(function (error) {\n        console.log(\"ADD VOTE ERROR\", error);\n      }), Axios.post(\"insert-voter.php\", {\n        email: theUser.email,\n        voted_for: canId\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(\"INSERT ERROR\", error);\n      })]).then(function (response) {\n        return response;\n      }).catch(function (error) {\n        console.log(\"CASTVOTE ERROR\", error);\n      });\n    };\n\n    const deleteVoteAndVoter = () => {\n      return axios.all([Axios.post(\"remove-one-vote.php\", {\n        id: canId\n      }), Axios.post(\"delete-voter.php\", {\n        id: theUser.id\n      })]).then(function (response) {\n        return uncastVote;\n      });\n    };\n\n    return addVoteAndVoter;\n  }\n\n  function unvote(canId) {\n    const deleteVoteAndVoter = () => {\n      return axios.all([Axios.post(\"remove-one-vote.php\", {\n        id: canId\n      }), Axios.post(\"delete-voter.php\", {\n        email: theUser.email\n      }).then(function (response) {\n        setVoted(true);\n      })]);\n    };\n\n    return deleteVoteAndVoter;\n  }\n\n  function addActiveButton(id) {\n    var splitId = id.split('-');\n    var activeId = '';\n    console.log(\"ADD\");\n\n    if (activeButton === id) {\n      setButton(\"Joe\");\n    } else {\n      if (splitId[0] === 'v') {\n        activeId = \"u-\" + splitId[1];\n      } else if (splitId[0] === 'u') {\n        activeId = \"v-\" + splitId[1];\n      }\n\n      setButton(activeId);\n    }\n  }\n\n  function disableButtons(id) {\n    const actBtn = localStorage.getItem(\"activeId\");\n    console.log();\n    var splitId = id.split('-');\n    console.log(\"DISABLE\");\n\n    if (activeButton === \"Joe\") {\n      if (splitId[0] === 'u') {\n        console.log('bababaabaa');\n        return true;\n      }\n\n      return false;\n    } else if (activeButton === \"Default\") {\n      console.log(\"1FUCKING THING\");\n      console.log(\"1fucking thing\", actBtn);\n\n      if (id === actBtn) {\n        setButton(actBtn);\n        console.log(\"Hey actbtn has a thing it's \", actBtn);\n      }\n\n      if (splitId[0] === 'u') {\n        console.log('bababaabaa');\n        return true;\n      }\n\n      return false;\n    } else if (activeButton === id) {\n      return false;\n    }\n\n    console.log(\"Uh oh\", activeButton);\n    return true;\n  }\n\n  function setCandsData() {\n    setCands(data);\n  }\n\n  function setActiveButton(id) {\n    console.log(\"FUCK YOU SET\");\n    const actBtn = localStorage.setItem(\"activeId\", id);\n    const get = localStorage.getItem(\"activeId\");\n    console.log(\"Hello, \", get);\n  }\n\n  function getActiveButton() {\n    const set = () => {\n      const actBtn = localStorage.getItem(\"activeId\");\n    };\n\n    return set;\n  }\n\n  function removeActiveButton() {\n    const set = () => {\n      const actBtn = localStorage.removeItem(\"activeId\");\n    };\n\n    return set;\n  }\n\n  function getCandData() {\n    const loadData = () => {\n      return axios.get(`http://localhost/php-voting-api/read-voter.php/`).then(result => {\n        setCands(result.data);\n      });\n    };\n\n    return loadData;\n  } // If user Logged in\n\n\n  if (isAuth) {\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"_img\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"User Image\",\n            children: \"\\uD83D\\uDC66\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: theUser.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"_email\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: theUser.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 45\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: joe => changeText(\"joe\"),\n          children: [buttonText, \"Logout\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: \"app\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" Yogaba \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: data.map(thing => thing.picture)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: candStuff.map(thing => {\n            return /*#__PURE__*/_jsxDEV(Col, {\n              md: 4,\n              children: /*#__PURE__*/_jsxDEV(VotingCard, {\n                team: thing,\n                add: add(thing.id),\n                subtract: unvote(thing.id),\n                setCand: hi => setCandsData(hi),\n                votes: thing.votecount,\n                name: thing.name,\n                voteid: 'v-' + thing.id,\n                unvoteid: 'u-' + thing.id,\n                check: but => disableButtons(but),\n                addActvButn: but => addActiveButton(but),\n                getData: data => getCandData(data),\n                set: bla => setActiveButton(bla),\n                get: bla => getActiveButton(bla),\n                remove: bla => removeActiveButton(bla)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 25\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }, this);\n  } // Showing Login Or Register Page According to the condition\n  else if (showLogin) {\n      return /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 16\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 16\n      }, this);\n    }\n}\n\n_s(Home, \"uKNxg60rVgj8KlXIcMBbf3iZPPs=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/Alex/voting-app/src/components/Home.js"],"names":["React","Fragment","useEffect","useState","useContext","MyContext","JoeContext","VoterContext","VoteContext","teamsJson","candsJson","Container","Row","Col","VotingCard","axios","Login","Register","CandData","Axios","create","baseURL","Home","rootState","logoutUser","obama","joemamba","castVote","uncastVote","loading","error","data","voterData","voted","voteState","addVote","readCand","isAuth","theUser","showLogin","cand_data","teams","setTeams","activeButton","setButton","buttonText","setButtonText","buttonInactive","setButtonInactive","candStuff","setCands","hasVoted","setVoted","changeText","text","makeInactive","state","incrementVoteCount","teamId","map","team","_id","votes","read","id","get","then","response","console","log","add","canId","addVoteAndVoter","all","post","catch","email","voted_for","deleteVoteAndVoter","unvote","addActiveButton","splitId","split","activeId","disableButtons","actBtn","localStorage","getItem","setCandsData","setActiveButton","setItem","getActiveButton","set","removeActiveButton","removeItem","getCandData","loadData","result","name","joe","thing","picture","hi","votecount","but","bla"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState, useContext} from 'react'\nimport {MyContext} from '../contexts/MyContext'\nimport {JoeContext} from './CandData'\nimport {VoterContext} from './VoterData'\n\nimport {VoteContext} from '../contexts/Voting-Context'\nimport teamsJson from \"../lib/teams.json\";\nimport candsJson from \"../lib/cands.json\";\n\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport VotingCard from \"../components/VotingCard.jsx\";\nimport axios from 'axios'\n\n// Importing the Login & Register Componet\nimport Login from './Login'\nimport Register from './Register'\nimport CandData from './CandData';\n\n// Define the base URL\nconst Axios = axios.create({\n    baseURL: 'http://localhost/php-voting-api/',\n});\nfunction Home(){\n\n    const {rootState,logoutUser} = useContext(MyContext);\n    const {obama} = useContext(JoeContext);\n    const {joemamba, castVote, uncastVote} = useContext(VoterContext);\n\n    const {loading, error, data} = obama;\n    const {voterData, voted} = joemamba;\n\n    const {voteState, addVote, readCand} = useContext(VoteContext);\n    const {isAuth,theUser,showLogin} = rootState;\n    const {cand_data} = voteState;\n    let [teams, setTeams] = useState([]);\n    let [activeButton, setButton] = useState(\"Default\");\n    const [buttonText, setButtonText] = useState(\"Default\"); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n    const [buttonInactive, setButtonInactive] = useState(false); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n    const [candStuff, setCands] = useState([]); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n    const [hasVoted, setVoted] = useState(null); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n\n    const changeText = (text) => setButtonText(text);\n    const makeInactive = (state) => setButtonInactive(state);\n    useEffect(() => {\n      setTeams(teamsJson);\n      setCands(data);\n    }, []);\n\n    function incrementVoteCount(teamId) {\n        teams = teams.map((team) => {\n            if (team._id === teamId) {\n            team.votes = team.votes + 1;\n            }\n            return team;\n        });\n        setTeams(teams);\n    }\n    async function read(id) {\n        try{\n            return Axios.get(\"read-candidate.php?id=\"+id)\n                .then(function(response) {\n                    console.log(\"READING RAINBOW\", response.data[0]);\n                    return response.data;\n                })\n            } catch (error) {\n            throw {\n                \n                };\n            } \n    }   \n\n    function add(canId) {\n        const addVoteAndVoter = () => {\n            return axios.all([\n                Axios.post(\"add-one-vote.php\", {\n                    id:canId\n                }).then(function(response) {\n                    setVoted(true);\n\n                }).catch(function(error) {\n                    console.log(\"ADD VOTE ERROR\", error)\n                }),\n                Axios.post(\"insert-voter.php\", {\n                    email:theUser.email,\n                    voted_for:canId\n                }).then(function(response) {\n                    console.log(response);\n                }).catch(function(error) {\n                    console.log(\"INSERT ERROR\", error)\n                }),\n            ]).then(function(response) {\n                return response;\n            }).catch(function(error) {\n                console.log(\"CASTVOTE ERROR\", error)\n            })\n        }\n        const deleteVoteAndVoter = () => {\n            return axios.all([\n                Axios.post(\"remove-one-vote.php\", {\n                    id:canId\n                    }),\n                Axios.post(\"delete-voter.php\", {\n                id:theUser.id\n                })\n            ]).then(function(response) {\n                return uncastVote;\n            })\n        }\n\n        return addVoteAndVoter;\n    }  \n\n    function unvote(canId) {\n        const deleteVoteAndVoter = () => {\n            return axios.all([\n                Axios.post(\"remove-one-vote.php\", {\n                    id:canId\n                    }),\n                Axios.post(\"delete-voter.php\", {\n                email:theUser.email\n                }).then(function(response) {\n                    setVoted(true);\n                })\n            ])\n        }\n        return deleteVoteAndVoter;\n    }\n    function addActiveButton(id){\n        var splitId = id.split('-');\n        var activeId = '';\n\n        console.log(\"ADD\");\n        if (activeButton === id) {\n            setButton(\"Joe\");\n        } \n        else {\n            if (splitId[0] === 'v') {\n                activeId = \"u-\" + splitId[1];\n            } else if (splitId[0] === 'u') {\n                activeId = \"v-\" + splitId[1];\n            }   \n            setButton(activeId);\n        }\n    }\n    function disableButtons(id) {\n        const actBtn = localStorage.getItem(\"activeId\");\n\n        console.log()\n        var splitId = id.split('-');\n        console.log(\"DISABLE\");\n        if (activeButton === \"Joe\") {\n            if (splitId[0] === 'u') {\n                console.log('bababaabaa');\n                return true;\n            }\n            return false;\n        }\n        else if (activeButton === \"Default\") \n        {\n            console.log(\"1FUCKING THING\");\n            console.log(\"1fucking thing\", actBtn)\n            if (id === actBtn) {\n                setButton(actBtn);\n                console.log(\"Hey actbtn has a thing it's \", actBtn);\n            }\n            if (splitId[0] === 'u') {\n                console.log('bababaabaa');\n                return true;\n            }\n            return false;\n        }\n        else if (activeButton === id){\n            return false;\n        } \n        console.log(\"Uh oh\", activeButton);\n        return true;\n    }\n    function setCandsData() {\n        setCands(data);  \n    }\n    function setActiveButton(id) {\n        console.log(\"FUCK YOU SET\");\n        const actBtn = localStorage.setItem(\"activeId\", id);\n        const get = localStorage.getItem(\"activeId\");\n        console.log(\"Hello, \",get);\n    }\n    function getActiveButton() {\n        const set = () => {\n            const actBtn = localStorage.getItem(\"activeId\");\n        }\n        return set;\n    }\n    function removeActiveButton() {\n        const set = () => {\n            const actBtn = localStorage.removeItem(\"activeId\");\n        }\n        return set;\n    }\n    function getCandData () {\n        const loadData = () => {\n            return axios\n              .get(\n                `http://localhost/php-voting-api/read-voter.php/`\n              )\n              .then(result => {\n                setCands(result.data);\n              })\n          };\n        return loadData;\n    }\n\n    // If user Logged in\n    if(isAuth)\n    {\n        return(\n            <Fragment>\n                <div className=\"userInfo\">\n                    <div className=\"_img\"><span role=\"img\" aria-label=\"User Image\">👦</span></div>\n                    <h1>{theUser.name}</h1>\n                    <div className=\"_email\"><span>{theUser.email}</span></div>\n                    <button onClick={(joe)=>changeText(\"joe\")}>{buttonText}Logout</button>\n                </div>\n                <Container className=\"app\">\n                    \n                    <div> Yogaba <span>{data.map((thing) =>thing.picture)}</span></div>\n                    <Row>\n                    {candStuff.map((thing) => {\n                        return (\n                        <Col md={4}>\n                            <VotingCard\n                            team={thing}\n                            add={add(thing.id)}\n                            subtract={unvote(thing.id)}\n                            setCand={(hi)=>setCandsData(hi)}\n                            votes = {thing.votecount}\n                            name = {thing.name}\n                            voteid={'v-'+thing.id}\n                            unvoteid={'u-'+thing.id}\n                            check={(but)=>disableButtons(but)}\n                            addActvButn={(but)=>addActiveButton(but)}\n                            getData = {(data)=>getCandData(data)}\n                            set={(bla)=>setActiveButton(bla)}\n                            get={(bla)=>getActiveButton(bla)}\n                            remove={(bla)=>removeActiveButton(bla)}\n\n                            />\n                        </Col>\n                        );\n                    })}\n                    </Row>\n                </Container>\n            </Fragment>\n        )\n    }\n    // Showing Login Or Register Page According to the condition\n    else if(showLogin){\n        return <Login/>;\n    }\n    else{\n        return <Register/>;\n    }\n    \n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}