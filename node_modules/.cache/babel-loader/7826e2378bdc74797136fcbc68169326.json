{"ast":null,"code":"import _classCallCheck from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{createContext,Component}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var VoterContext=/*#__PURE__*/createContext();var VoterData=/*#__PURE__*/function(_Component){_inherits(VoterData,_Component);var _super=_createSuper(VoterData);function VoterData(){var _this;_classCallCheck(this,VoterData);_this=_super.call(this);_this.state={loading:true,error:\"\",voterData:null,voted:false};_this.loadData=function(){_this.setState({loading:true});return axios.get(\"http://localhost/php-voting-api/read-voter.php/\").then(function(result){console.log(\"SALUTATIONS\",result.data);_this.setState({voterData:result.data,loading:false,error:false});}).catch(function(error){console.error(\"error: \",error);_this.setState({// objects cannot be used as a react child\n// -> <p>{error}</p> would throw otherwise\nerror:\"\".concat(error),loading:false});});};_this.setVotedState=function(set){_this.setState({voted:set});};return _this;}_createClass(VoterData,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadData();}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,error=_this$state.error,voterData=_this$state.voterData;if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading ...\"});}if(error){return/*#__PURE__*/_jsxs(\"p\",{children:[\"There was an error loading the repos.\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:this.loadData,children:\"Try again\"})]});}var contextValue={joemamba:this.state,setVotedState:this.setVotedState};return/*#__PURE__*/_jsx(VoterContext.Provider,{value:contextValue,children:this.props.children});}}]);return VoterData;}(Component);export default VoterData;","map":{"version":3,"sources":["/home/alex/voting-app/src/components/VoterData.js"],"names":["React","createContext","Component","axios","VoterContext","VoterData","state","loading","error","voterData","voted","loadData","setState","get","then","result","console","log","data","catch","setVotedState","set","contextValue","joemamba","props","children"],"mappings":"giBAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,SAA/B,KAA+C,OAA/C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFACA,MAAO,IAAMC,CAAAA,YAAY,cAAGH,aAAa,EAAlC,C,GAEDI,CAAAA,S,sGACJ,oBAAa,2CACX,wBADW,MAGbC,KAHa,CAGL,CACNC,OAAO,CAAE,IADH,CAENC,KAAK,CAAE,EAFD,CAGNC,SAAS,CAAE,IAHL,CAINC,KAAK,CAAE,KAJD,CAHK,OASbC,QATa,CASF,UAAM,CACf,MAAKC,QAAL,CAAc,CAAEL,OAAO,CAAE,IAAX,CAAd,EACA,MAAOJ,CAAAA,KAAK,CACTU,GADI,oDAIJC,IAJI,CAIC,SAAAC,MAAM,CAAI,CACdC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BF,MAAM,CAACG,IAAlC,EACA,MAAKN,QAAL,CAAc,CACZH,SAAS,CAAEM,MAAM,CAACG,IADN,CAEZX,OAAO,CAAE,KAFG,CAGZC,KAAK,CAAE,KAHK,CAAd,EAKD,CAXI,EAYJW,KAZI,CAYE,SAAAX,KAAK,CAAI,CACdQ,OAAO,CAACR,KAAR,CAAc,SAAd,CAAyBA,KAAzB,EACA,MAAKI,QAAL,CAAc,CACZ;AACA;AACAJ,KAAK,WAAKA,KAAL,CAHO,CAIZD,OAAO,CAAE,KAJG,CAAd,EAMD,CApBI,CAAP,CAqBD,CAhCY,OAiCba,aAjCa,CAiCG,SAACC,GAAD,CAAS,CACrB,MAAKT,QAAL,CAAc,CAACF,KAAK,CAACW,GAAP,CAAd,EACH,CAnCY,cAEZ,C,uDAmCD,4BAAoB,CAClB,KAAKV,QAAL,GACD,C,sBACD,iBAAS,CACP,gBAAsC,KAAKL,KAA3C,CAAQC,OAAR,aAAQA,OAAR,CAAiBC,KAAjB,aAAiBA,KAAjB,CAAwBC,SAAxB,aAAwBA,SAAxB,CACA,GAAIF,OAAJ,CAAa,CACX,mBAAO,kCAAP,CACD,CACD,GAAIC,KAAJ,CAAW,CACT,mBACE,6DACwC,GADxC,cAEE,eAAQ,OAAO,CAAE,KAAKG,QAAtB,uBAFF,GADF,CAMD,CACD,GAAMW,CAAAA,YAAY,CAAE,CAClBC,QAAQ,CAAC,KAAKjB,KADI,CAElBc,aAAa,CAAE,KAAKA,aAFF,CAApB,CAIA,mBACE,KAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAEE,YAA9B,UACG,KAAKE,KAAL,CAAWC,QADd,EADF,CAKD,C,uBA/DqBvB,S,EAkExB,cAAeG,CAAAA,SAAf","sourcesContent":["import React, { createContext, Component} from \"react\";\nimport axios from \"axios\";\nexport const VoterContext = createContext();\n\nclass VoterData extends Component {\n  constructor(){\n    super();\n  }\n  state = {\n    loading: true,\n    error: \"\",\n    voterData: null,\n    voted: false\n  };\n  loadData = () => {\n    this.setState({ loading: true });\n    return axios\n      .get(\n        `http://localhost/php-voting-api/read-voter.php/`\n      )\n      .then(result => {\n        console.log(\"SALUTATIONS\", result.data);\n        this.setState({\n          voterData: result.data,\n          loading: false,\n          error: false\n        });\n      })\n      .catch(error => {\n        console.error(\"error: \", error);\n        this.setState({\n          // objects cannot be used as a react child\n          // -> <p>{error}</p> would throw otherwise\n          error: `${error}`,\n          loading: false\n        });\n      });\n  };\n  setVotedState = (set) => {\n      this.setState({voted:set})\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n  render() {\n    const { loading, error, voterData } = this.state;\n    if (loading) {\n      return <p>Loading ...</p>;\n    }\n    if (error) {\n      return (\n        <p>\n          There was an error loading the repos.{\" \"}\n          <button onClick={this.loadData}>Try again</button>\n        </p>\n      );\n    }\n    const contextValue= {\n      joemamba:this.state,\n      setVotedState: this.setVotedState,\n    }\n    return ( \n      <VoterContext.Provider value={contextValue}>\n        {this.props.children}\n      </VoterContext.Provider>\n    )\n  }\n}\n\nexport default VoterData;"]},"metadata":{},"sourceType":"module"}