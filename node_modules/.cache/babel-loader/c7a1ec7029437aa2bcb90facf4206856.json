{"ast":null,"code":"import _regeneratorRuntime from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState,useContext}from'react';import{MyContext}from'../contexts/MyContext';import{JoeContext}from'./CandData';import{VoterContext}from'./VoterData';import{VoteContext}from'../contexts/Voting-Context';import teamsJson from\"../lib/teams.json\";import candsJson from\"../lib/cands.json\";import{Container,Row,Col}from\"react-bootstrap\";import VotingCard from\"../components/VotingCard.jsx\";import axios from'axios';// Importing the Login & Register Componet\nimport Login from'./Login';import Register from'./Register';import CandData from'./CandData';// Define the base URL\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Axios=axios.create({baseURL:'http://localhost/php-voting-api/'});function Home(){var _useContext=useContext(MyContext),rootState=_useContext.rootState,logoutUser=_useContext.logoutUser;var _useContext2=useContext(JoeContext),obama=_useContext2.obama;var _useContext3=useContext(VoterContext),joemamba=_useContext3.joemamba,castVote=_useContext3.castVote,uncastVote=_useContext3.uncastVote;var loading=obama.loading,error=obama.error,data=obama.data;var voterData=joemamba.voterData,voted=joemamba.voted;var _useContext4=useContext(VoteContext),voteState=_useContext4.voteState,addVote=_useContext4.addVote,readCand=_useContext4.readCand;var isAuth=rootState.isAuth,theUser=rootState.theUser,showLogin=rootState.showLogin;var cand_data=voteState.cand_data;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),teams=_useState2[0],setTeams=_useState2[1];var _useState3=useState(\"Default\"),_useState4=_slicedToArray(_useState3,2),activeButton=_useState4[0],setButton=_useState4[1];var _useState5=useState(\"Default\"),_useState6=_slicedToArray(_useState5,2),buttonText=_useState6[0],setButtonText=_useState6[1];//same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),buttonInactive=_useState8[0],setButtonInactive=_useState8[1];//same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),candStuff=_useState10[0],setCands=_useState10[1];//same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\nvar _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),hasVoted=_useState12[0],setVoted=_useState12[1];//same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\nvar changeText=function changeText(text){return setButtonText(text);};var makeInactive=function makeInactive(state){return setButtonInactive(state);};useEffect(function(){setTeams(teamsJson);setCands(data);},[]);function incrementVoteCount(teamId){teams=teams.map(function(team){if(team._id===teamId){team.votes=team.votes+1;}return team;});setTeams(teams);}function read(_x){return _read.apply(this,arguments);}function _read(){_read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;return _context.abrupt(\"return\",Axios.get(\"read-candidate.php?id=\"+id).then(function(response){console.log(\"READING RAINBOW\",response.data[0]);return response.data;}));case 4:_context.prev=4;_context.t0=_context[\"catch\"](0);throw{};case 7:case\"end\":return _context.stop();}}},_callee,null,[[0,4]]);}));return _read.apply(this,arguments);}function add(canId){var addVoteAndVoter=function addVoteAndVoter(){return axios.all([Axios.post(\"add-one-vote.php\",{id:canId}).then(function(response){setVoted(true);}).catch(function(error){console.log(\"ADD VOTE ERROR\",error);}),Axios.post(\"insert-voter.php\",{email:theUser.email,voted_for:canId}).then(function(response){console.log(response);}).catch(function(error){console.log(\"INSERT ERROR\",error);})]).then(function(response){return response;}).catch(function(error){console.log(\"CASTVOTE ERROR\",error);});};var deleteVoteAndVoter=function deleteVoteAndVoter(){return axios.all([Axios.post(\"remove-one-vote.php\",{id:canId}),Axios.post(\"delete-voter.php\",{id:theUser.id})]).then(function(response){return uncastVote;});};return addVoteAndVoter;}function unvote(canId){var deleteVoteAndVoter=function deleteVoteAndVoter(){return axios.all([Axios.post(\"remove-one-vote.php\",{id:canId}),Axios.post(\"delete-voter.php\",{email:theUser.email}).then(function(response){setVoted(true);})]);};return deleteVoteAndVoter;}function addActiveButton(id){var splitId=id.split('-');var activeId='';console.log(\"ADD\");if(activeButton===id){setButton(\"Joe\");}else{if(splitId[0]==='v'){activeId=\"u-\"+splitId[1];}else if(splitId[0]==='u'){activeId=\"v-\"+splitId[1];}setButton(activeId);}}function disableButtons(id){var actBtn=localStorage.getItem(\"activeId\");console.log();var splitId=id.split('-');console.log(\"DISABLE\");if(activeButton===\"Joe\"){if(splitId[0]==='u'){console.log('bababaabaa');return true;}return false;}else if(activeButton===\"Default\"){if(id===actBtn){setButton(actBtn);console.log(\"Hey actbtn has a thing it's \",actBtn);}if(splitId[0]==='u'){console.log('bababaabaa');return true;}return false;}else if(activeButton===id){return false;}console.log(\"Uh oh\",activeButton);return true;}function setCandsData(){setCands(data);}function setActiveButton(id){console.log(\"FUCK YOU SET\");var actBtn=localStorage.setItem(\"activeId\",id);var get=localStorage.getItem(\"activeId\");console.log(\"Hello, \",get);}function getActiveButton(){var set=function set(){var actBtn=localStorage.getItem(\"activeId\");};return set;}function removeActiveButton(){var set=function set(){var actBtn=localStorage.removeItem(\"activeId\");};return set;}function getCandData(){var loadData=function loadData(){return axios.get(\"http://localhost/php-voting-api/read-candidate.php/\").then(function(result){console.log(\"YOYOGETCANDDATAYO\",result.data);setCands(result.data);});};return loadData;}// If user Logged in\nif(isAuth){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"userInfo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"_img\",children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"User Image\",children:\"\\uD83D\\uDC66\"})}),/*#__PURE__*/_jsx(\"h1\",{children:theUser.name}),/*#__PURE__*/_jsx(\"div\",{className:\"_email\",children:/*#__PURE__*/_jsx(\"span\",{children:theUser.email})}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(boo){return changeText(candStuff[1].votecount);},children:[buttonText,\"Logout\"]})]}),/*#__PURE__*/_jsxs(Container,{className:\"app\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" Yogaba \",/*#__PURE__*/_jsx(\"span\",{children:data.map(function(thing){return thing.picture;})})]}),/*#__PURE__*/_jsx(Row,{children:candStuff.map(function(thing,index){return/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(VotingCard,{team:thing,add:add(thing.id),subtract:unvote(thing.id),setCand:function setCand(hi){return setCandsData(hi);},votes:thing.votecount,name:thing.name,voteid:'v-'+thing.id,unvoteid:'u-'+thing.id,check:function check(but){return disableButtons(but);},addActvButn:function addActvButn(but){return addActiveButton(but);},getData:getCandData(),set:function set(bla){return setActiveButton(bla);},get:function get(bla){return getActiveButton(bla);},remove:function remove(bla){return removeActiveButton(bla);},votecount:candStuff[index].votecount}),/*#__PURE__*/_jsx(\"div\",{children:candStuff[index].votecount})]});})})]})]});}// Showing Login Or Register Page According to the condition\nelse if(showLogin){return/*#__PURE__*/_jsx(Login,{});}else{return/*#__PURE__*/_jsx(Register,{});}}export default Home;","map":{"version":3,"sources":["/home/alex/voting-app/src/components/Home.js"],"names":["React","Fragment","useEffect","useState","useContext","MyContext","JoeContext","VoterContext","VoteContext","teamsJson","candsJson","Container","Row","Col","VotingCard","axios","Login","Register","CandData","Axios","create","baseURL","Home","rootState","logoutUser","obama","joemamba","castVote","uncastVote","loading","error","data","voterData","voted","voteState","addVote","readCand","isAuth","theUser","showLogin","cand_data","teams","setTeams","activeButton","setButton","buttonText","setButtonText","buttonInactive","setButtonInactive","candStuff","setCands","hasVoted","setVoted","changeText","text","makeInactive","state","incrementVoteCount","teamId","map","team","_id","votes","read","id","get","then","response","console","log","add","canId","addVoteAndVoter","all","post","catch","email","voted_for","deleteVoteAndVoter","unvote","addActiveButton","splitId","split","activeId","disableButtons","actBtn","localStorage","getItem","setCandsData","setActiveButton","setItem","getActiveButton","set","removeActiveButton","removeItem","getCandData","loadData","result","name","boo","votecount","thing","picture","index","hi","but","bla"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState, useContext} from 'react'\nimport {MyContext} from '../contexts/MyContext'\nimport {JoeContext} from './CandData'\nimport {VoterContext} from './VoterData'\n\nimport {VoteContext} from '../contexts/Voting-Context'\nimport teamsJson from \"../lib/teams.json\";\nimport candsJson from \"../lib/cands.json\";\n\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport VotingCard from \"../components/VotingCard.jsx\";\nimport axios from 'axios'\n\n// Importing the Login & Register Componet\nimport Login from './Login'\nimport Register from './Register'\nimport CandData from './CandData';\n\n// Define the base URL\nconst Axios = axios.create({\n    baseURL: 'http://localhost/php-voting-api/',\n});\nfunction Home(){\n\n    const {rootState,logoutUser} = useContext(MyContext);\n    const {obama} = useContext(JoeContext);\n    const {joemamba, castVote, uncastVote} = useContext(VoterContext);\n\n    const {loading, error, data} = obama;\n    const {voterData, voted} = joemamba;\n\n    const {voteState, addVote, readCand} = useContext(VoteContext);\n    const {isAuth,theUser,showLogin} = rootState;\n    const {cand_data} = voteState;\n    let [teams, setTeams] = useState([]);\n    let [activeButton, setButton] = useState(\"Default\");\n    const [buttonText, setButtonText] = useState(\"Default\"); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n    const [buttonInactive, setButtonInactive] = useState(false); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n    const [candStuff, setCands] = useState([]); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n    const [hasVoted, setVoted] = useState(null); //same as creating your state variable where \"Next\" is the default value for buttonText and setButtonText is the setter function for your state variable instead of setState\n\n    const changeText = (text) => setButtonText(text);\n    const makeInactive = (state) => setButtonInactive(state);\n    useEffect(() => {\n      setTeams(teamsJson);\n      setCands(data);\n    }, []);\n\n    function incrementVoteCount(teamId) {\n        teams = teams.map((team) => {\n            if (team._id === teamId) {\n            team.votes = team.votes + 1;\n            }\n            return team;\n        });\n        setTeams(teams);\n    }\n    async function read(id) {\n        try{\n            return Axios.get(\"read-candidate.php?id=\"+id)\n                .then(function(response) {\n                    console.log(\"READING RAINBOW\", response.data[0]);\n                    return response.data;\n                })\n            } catch (error) {\n            throw {\n                \n                };\n            } \n    }   \n\n    function add(canId) {\n        const addVoteAndVoter = () => {\n            return axios.all([\n                Axios.post(\"add-one-vote.php\", {\n                    id:canId\n                }).then(function(response) {\n                    setVoted(true);\n\n                }).catch(function(error) {\n                    console.log(\"ADD VOTE ERROR\", error)\n                }),\n                Axios.post(\"insert-voter.php\", {\n                    email:theUser.email,\n                    voted_for:canId\n                }).then(function(response) {\n                    console.log(response);\n                }).catch(function(error) {\n                    console.log(\"INSERT ERROR\", error)\n                }),\n            ]).then(function(response) {\n                return response;\n            }).catch(function(error) {\n                console.log(\"CASTVOTE ERROR\", error)\n            })\n        }\n        const deleteVoteAndVoter = () => {\n            return axios.all([\n                Axios.post(\"remove-one-vote.php\", {\n                    id:canId\n                    }),\n                Axios.post(\"delete-voter.php\", {\n                id:theUser.id\n                })\n            ]).then(function(response) {\n                return uncastVote;\n            })\n        }\n\n        return addVoteAndVoter;\n    }  \n\n    function unvote(canId) {\n        const deleteVoteAndVoter = () => {\n            return axios.all([\n                Axios.post(\"remove-one-vote.php\", {\n                    id:canId\n                    }),\n                Axios.post(\"delete-voter.php\", {\n                email:theUser.email\n                }).then(function(response) {\n                    setVoted(true);\n                })\n            ])\n        }\n        return deleteVoteAndVoter;\n    }\n    function addActiveButton(id){\n        var splitId = id.split('-');\n        var activeId = '';\n\n        console.log(\"ADD\");\n        if (activeButton === id) {\n            setButton(\"Joe\");\n        } \n        else {\n            if (splitId[0] === 'v') {\n                activeId = \"u-\" + splitId[1];\n            } else if (splitId[0] === 'u') {\n                activeId = \"v-\" + splitId[1];\n            }   \n            setButton(activeId);\n        }\n    }\n    function disableButtons(id) {\n        const actBtn = localStorage.getItem(\"activeId\");\n\n        console.log()\n        var splitId = id.split('-');\n        console.log(\"DISABLE\");\n        if (activeButton === \"Joe\") {\n            if (splitId[0] === 'u') {\n                console.log('bababaabaa');\n                return true;\n            }\n            return false;\n        }\n        else if (activeButton === \"Default\") \n        {\n            if (id === actBtn) {\n                setButton(actBtn);\n                console.log(\"Hey actbtn has a thing it's \", actBtn);\n            }\n            if (splitId[0] === 'u') {\n                console.log('bababaabaa');\n                return true;\n            }\n            return false;\n        }\n        else if (activeButton === id){\n            return false;\n        } \n        console.log(\"Uh oh\", activeButton);\n        return true;\n    }\n    function setCandsData() {\n        setCands(data);  \n    }\n    function setActiveButton(id) {\n        console.log(\"FUCK YOU SET\");\n        const actBtn = localStorage.setItem(\"activeId\", id);\n        const get = localStorage.getItem(\"activeId\");\n        console.log(\"Hello, \",get);\n    }\n    function getActiveButton() {\n        const set = () => {\n            const actBtn = localStorage.getItem(\"activeId\");\n        }\n        return set;\n    }\n    function removeActiveButton() {\n        const set = () => {\n            const actBtn = localStorage.removeItem(\"activeId\");\n        }\n        return set;\n    }\n    function getCandData () {\n        const loadData = () => {\n            return axios\n              .get(\n                `http://localhost/php-voting-api/read-candidate.php/`\n              )\n              .then(result => {\n                console.log(\"YOYOGETCANDDATAYO\", result.data);\n                setCands(result.data);\n              })\n          };\n        return loadData;\n    }\n\n    // If user Logged in\n    if(isAuth)\n    {\n        return(\n            <Fragment>\n                <div className=\"userInfo\">\n                    <div className=\"_img\"><span role=\"img\" aria-label=\"User Image\">👦</span></div>\n                    <h1>{theUser.name}</h1>\n                    <div className=\"_email\"><span>{theUser.email}</span></div>\n                    <button onClick={(boo)=>changeText(candStuff[1].votecount)}>{buttonText}Logout</button>\n                </div>\n                <Container className=\"app\">\n                    \n                    <div> Yogaba <span>{data.map((thing) =>thing.picture)}</span></div>\n                    <Row>\n                    {candStuff.map((thing, index) => {\n                        return (\n                        <Col md={4}>\n                            <VotingCard\n                            team={thing}\n                            add={add(thing.id)}\n                            subtract={unvote(thing.id)}\n                            setCand={(hi)=>setCandsData(hi)}\n                            votes = {thing.votecount}\n                            name = {thing.name}\n                            voteid={'v-'+thing.id}\n                            unvoteid={'u-'+thing.id}\n                            check={(but)=>disableButtons(but)}\n                            addActvButn={(but)=>addActiveButton(but)}\n                            getData = {getCandData()}\n                            set={(bla)=>setActiveButton(bla)}\n                            get={(bla)=>getActiveButton(bla)}\n                            remove={(bla)=>removeActiveButton(bla)}\n                            votecount={candStuff[index].votecount}\n                            />\n                            <div>{candStuff[index].votecount}</div>\n                        </Col>\n                        );\n                    })}\n                    </Row>\n                </Container>\n            </Fragment>\n        )\n    }\n    // Showing Login Or Register Page According to the condition\n    else if(showLogin){\n        return <Login/>;\n    }\n    else{\n        return <Register/>;\n    }\n    \n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}