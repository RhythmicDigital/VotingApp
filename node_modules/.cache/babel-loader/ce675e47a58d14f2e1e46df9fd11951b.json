{"ast":null,"code":"import _regeneratorRuntime from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/alex/voting-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{createContext,Component,useEffect,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export var VoteContext=/*#__PURE__*/createContext();// Define the base URL\nvar Axios=axios.create({baseURL:'http://localhost/php-voting-api/'});var VotingContextProvider=/*#__PURE__*/function(_Component){_inherits(VotingContextProvider,_Component);var _super=_createSuper(VotingContextProvider);function VotingContextProvider(){var _this;_classCallCheck(this,VotingContextProvider);_this=_super.call(this);_this.state={cand_data:null};_this.readCand=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",axios.get(\"https://api.github.com/search/repositories?q=stars:>1+language:javascript&sort=stars&order=desc&type=Repositories\").then(function(result){_this.setState({cand_data:result.data.items});}).catch(function(error){console.error(\"error: \",error);_this.setState({// objects cannot be used as a react child\n// -> <p>{error}</p> would throw otherwise\nerror:\"\".concat(error),loading:false});}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(VotingContextProvider,[{key:\"addVote\",value:function addVote(canId){var fetchData=function fetchData(){return Axios.post(\"add-one-vote.php\",{id:canId}).then(function(response){console.log(response);return'lolol';}).catch(function(error){console.log(error);});};return fetchData;}},{key:\"componentDidMount\",value:function componentDidMount(){this.readCand();}},{key:\"render\",value:function render(){var contextValue={voteState:this.state,addVote:this.addVote,readCand:this.readCand};return/*#__PURE__*/_jsx(VoteContext.Provider,{value:contextValue,children:this.props.children});}}]);return VotingContextProvider;}(Component);export default VotingContextProvider;","map":{"version":3,"sources":["/home/alex/voting-app/src/contexts/Voting-Context.js"],"names":["React","createContext","Component","useEffect","useState","axios","VoteContext","Axios","create","baseURL","VotingContextProvider","state","cand_data","readCand","id","get","then","result","setState","data","items","catch","error","console","loading","canId","fetchData","post","response","log","contextValue","voteState","addVote","props","children"],"mappings":"qzBAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA8BC,SAA9B,CAAyCC,SAAzC,CAAoDC,QAApD,KAAoE,OAApE,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CACA,MAAO,IAAMC,CAAAA,WAAW,cAAGL,aAAa,EAAjC,CAEP;AACA,GAAMM,CAAAA,KAAK,CAAGF,KAAK,CAACG,MAAN,CAAa,CACvBC,OAAO,CAAE,kCADc,CAAb,CAAd,C,GAIMC,CAAAA,qB,8HACF,gCAAa,uDACT,wBADS,MAGbC,KAHa,CAGL,CACJC,SAAS,CAAE,IADP,CAHK,OAObC,QAPa,0FAOF,iBAAOC,EAAP,kJACAT,KAAK,CAACU,GAAN,sHAA+HC,IAA/H,CAAoI,SAAAC,MAAM,CAAI,CACjJ,MAAKC,QAAL,CAAc,CAACN,SAAS,CAACK,MAAM,CAACE,IAAP,CAAYC,KAAvB,CAAd,EACH,CAFM,EAGNC,KAHM,CAGA,SAAAC,KAAK,CAAI,CACZC,OAAO,CAACD,KAAR,CAAc,SAAd,CAAyBA,KAAzB,EACA,MAAKJ,QAAL,CAAc,CACZ;AACA;AACAI,KAAK,WAAKA,KAAL,CAHO,CAIZE,OAAO,CAAE,KAJG,CAAd,EAMD,CAXI,CADA,wDAPE,4EAEZ,C,yDAoBD,iBAAQC,KAAR,CAAe,CAEX,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,MAAOnB,CAAAA,KAAK,CAACoB,IAAN,CAAW,kBAAX,CAA+B,CAClCb,EAAE,CAACW,KAD+B,CAA/B,EAGFT,IAHE,CAGG,SAAUY,QAAV,CAAoB,CACtBL,OAAO,CAACM,GAAR,CAAYD,QAAZ,EACA,MAAO,OAAP,CACD,CANA,EAOAP,KAPA,CAOM,SAAUC,KAAV,CAAiB,CACtBC,OAAO,CAACM,GAAR,CAAYP,KAAZ,EACF,CATC,CAAP,CAUC,CAXL,CAaA,MAAOI,CAAAA,SAAP,CAEH,C,iCACD,4BAAqB,CACjB,KAAKb,QAAL,GACH,C,sBACD,iBAAQ,CACJ,GAAMiB,CAAAA,YAAY,CAAG,CACjBC,SAAS,CAAC,KAAKpB,KADE,CAEjBqB,OAAO,CAAC,KAAKA,OAFI,CAGjBnB,QAAQ,CAAC,KAAKA,QAHG,CAArB,CAKA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEiB,YAA7B,UACK,KAAKG,KAAL,CAAWC,QADhB,EADJ,CAKH,C,mCAvD+BhC,S,EA0DpC,cAAeQ,CAAAA,qBAAf","sourcesContent":["import React, { createContext,Component, useEffect, useState } from \"react\";\nimport axios from 'axios'\nexport const VoteContext = createContext();\n\n// Define the base URL\nconst Axios = axios.create({\n    baseURL: 'http://localhost/php-voting-api/',\n});\n\nclass VotingContextProvider extends Component{\n    constructor(){\n        super();\n    }\n    state = {\n        cand_data: null\n    };\n    \n    readCand = async (id) => {\n        return axios.get(`https://api.github.com/search/repositories?q=stars:>1+language:javascript&sort=stars&order=desc&type=Repositories`).then(result => {\n            this.setState({cand_data:result.data.items});\n        })\n        .catch(error => {\n            console.error(\"error: \", error);\n            this.setState({\n              // objects cannot be used as a react child\n              // -> <p>{error}</p> would throw otherwise\n              error: `${error}`,\n              loading: false\n            });\n          });\n    }   \n    \n    addVote(canId) {\n\n        const fetchData = () => {\n            return Axios.post(\"add-one-vote.php\", {\n                id:canId\n                })\n                .then(function (response) {\n                    console.log(response);\n                    return 'lolol';\n                  })\n                  .catch(function (error) {\n                    console.log(error);\n                 });\n            }\n\n        return fetchData;\n\n    }   \n    componentDidMount () {\n        this.readCand();\n    }\n    render(){\n        const contextValue = {\n            voteState:this.state,\n            addVote:this.addVote,\n            readCand:this.readCand\n        }\n        return(\n            <VoteContext.Provider value={contextValue}>\n                {this.props.children}\n            </VoteContext.Provider>\n        )\n    }\n}\n\nexport default VotingContextProvider;"]},"metadata":{},"sourceType":"module"}